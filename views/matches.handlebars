<script src="/js/library.js"></script>
<script src="/js/matches.js"></script>
{{>nav}}
{{>alert}}

<!-- This is how info should probably come in to make our lives easier:

active: {
    matchKey: {
        ...data from Matches table,
        profile: {
            Photo,
            ArtistName
        }
    },
    ...
},
incoming: {
    matchKey: {
        ...data from Matches table,
        ad: {
            ...ad data for this ad,
            instruments: {
                ... instruments for this ad
            }
        }
    },
    ...tch
},
outgoing: {
    adID: {
        ...ad data for this ad,
        matches: {
            profileID: {
                ...profile data for this profile,
                instruments: {
                    ...instruments for this profile
                }
            },
            ...
        }
    },
    ...
}
-->


<main>
    <div class="main-container main-active-matches">
        <div class="active-matches-label">
            <h1>Connections:</h1>
        </div>
        <div class="active-matches-container">
            <div id="no-active-matches" class="active-matches-text" hidden>
                <h3>Nothing to see here. <i class="fas fa-wind"></i></h3>
            </div>

            <div id="active-matches">
                {{#each active}}

                <div id="match-{{@key}}"class="active-match">
                    <div class="active-match-image">
                        <img src="/img/profile-img.jpg">
                    </div>
                    <div class="active-match-info">
                        <h4>{{this.Profile.ArtistName}}</h4> {{! Insert artist name here }}
                        <h5>Connected on {{moment this.DateAccepted format="MM/DD/YY"}}</h5> {{! Insert connect date here }}
                    </div>
                    <div class="active-match-buttons">
                        {{#if (eq this.MatchedProfileID ../profile.ProfileKey)}}
                        {{else}}
                        <button class="button success expanded" onclick="window.location='user-profile?ProfileID={{this.MatchedProfileID}}'"><i class="far fa-eye"></i>View Profile</button> {{! Will only be displayed if ad-poster made the request to connect }}
                        {{/if}}
                        <button class="button active expanded" onclick="disconnectMatch({{@key}})"><i class="fas fa-microphone-alt-slash"></i>Disconnect</button> {{! Either user can disconnect the match }}
                        <button class="button warning expanded" onclick="blockMatch({{@key}})"><i class="fas fa-hand-middle-finger"></i>Block</button> {{! Either user can block the other }}
                    </div>
                </div>
                {{/each}}
            </div>
        </div>
    </div>
    <div class="main-container main-incoming-matches">
        <div class="incoming-matches-label">
            <h1>Incoming:</h1>
        </div>
        <div class="incoming-matches-container">
            <div id="no-incoming-matches" class="incoming-matches-text" hidden>
                <h3>Nothing to see here. <i class="fas fa-wind"></i></h3>
            </div>

            <div id="incoming-matches">
                <div class="incoming-match">
                    <div class="incoming-match-alert">
                        <h5>Jordan has sent you a request to connect!</h5> {{! Update with ad-posting user name }}
                    </div>
                    <div class="incoming-match-content">
                        <div class="incoming-match-image">
                            <img src="/img/profile-img.jpg">
                        </div>
                        <div class="incoming-match-info">
                            <h4>Ad Title</h4> {{! Insert ad title here }}
                            <h5>Date</h5> {{! Insert ad-create date here }}
                            <p>Description</p> {{! Insert ad description here }}
                        </div>
                        <div class="incoming-match-instruments">
                            <h4>Instruments</h4>
                            <ul>
                                <li>
                                    Instrument 1!
                                </li>
                                <li>
                                    Instrument 2!
                                </li>
                            </ul>
                        </div>
                        <div class="incoming-match-buttons">
                            <button class="button success expanded"><i class="fas fa-user-check"></i>Accept</button> {{! Will make match's Accepted flag = 1 }}
                            <button class="button warning expanded"><i class="fas fa-not-equal"></i>Reject</button> {{! Will make match's Deleted flag = 1}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="main-container main-outgoing-matches">
        <div class="outgoing-matches-label">
            <h1>Outgoing:</h1>
        </div>
        <div class="outgoing-matches-container">
            <div id="no-outgoing-matches" class="outgoing-matches-text" hidden>
                <h3>Nothing to see here. <i class="fas fa-wind"></i></h3>
            </div>

            <div id="outgoing-matches">
                <div class="outgoing-match-ad-group">
                    <div class="outgoing-match-ad-group-info">
                        <h4>My Ad Title</h4>
                        <h5>01-01-2020</h5>
                    </div>
                    {{! container for each person requested to match for this specific ad }}
                    <div class="outgoing-match-container">
                        <div class="outgoing-match-image">
                            <img src="/img/profile-img.jpg">
                        </div>
                        <div class="outgoing-match-info">
                            <h4>Artist Name</h4>
                            <h6>Date Invite Sent</h6>
                        </div>
                        <div class="outgoing-match-instruments">
                            <h4>Instruments</h4>
                            <ul>
                                <li>
                                    Instrument 1!
                                </li>
                                <li>
                                    Instrument 2!
                                </li>
                            </ul>
                        </div>
                        <div class="outgoing-match-pending">
                            <button type="button" class="button light disabled expanded"><i class="fas fa-user-clock"></i>Pending...</button>
                        </div>
                    </div>
                </div>
                <div class="outgoing-match-ad-group">
                    <div class="outgoing-match-ad-group-info">
                        <h4>My Ad Title</h4>
                        <h5>01-01-2020</h5>
                    </div>
                    {{! container for each person requested to match for this specific ad }}
                    <div class="outgoing-match-container">
                        <div class="outgoing-match-image">
                            <img src="/img/profile-img.jpg">
                        </div>
                        <div class="outgoing-match-info">
                            <h4>Artist Name</h4>
                            <h6>Date Invite Sent</h6>
                        </div>
                        <div class="outgoing-match-instruments">
                            <h4>Instruments</h4>
                            <ul>
                                <li>
                                    Instrument 1!
                                </li>
                                <li>
                                    Instrument 2!
                                </li>
                            </ul>
                        </div>
                        <div class="outgoing-match-pending">
                            <button type="button" class="button light disabled expanded"><i class="fas fa-user-clock"></i>Pending...</button>
                        </div>
                    </div>
                    <div class="outgoing-match-container">
                        <div class="outgoing-match-image">
                            <img src="/img/profile-img.jpg">
                        </div>
                        <div class="outgoing-match-info">
                            <h4>Artist Name</h4>
                            <h6>Date Invite Sent</h6>
                        </div>
                        <div class="outgoing-match-instruments">
                            <h4>Instruments</h4>
                            <ul>
                                <li>
                                    Instrument 1!
                                </li>
                                <li>
                                    Instrument 2!
                                </li>
                            </ul>
                        </div>
                        <div class="outgoing-match-pending">
                            <button type="button" class="button light disabled expanded"><i class="fas fa-user-clock"></i>Pending...</button>
                        </div>
                    </div>
                    <div class="outgoing-match-container">
                        <div class="outgoing-match-image">
                            <img src="/img/profile-img.jpg">
                        </div>
                        <div class="outgoing-match-info">
                            <h4>Artist Name</h4>
                            <h6>Date Invite Sent</h6>
                        </div>
                        <div class="outgoing-match-instruments">
                            <h4>Instruments</h4>
                            <ul>
                                <li>
                                    Instrument 1!
                                </li>
                                <li>
                                    Instrument 2!
                                </li>
                            </ul>
                        </div>
                        <div class="outgoing-match-pending">
                            <button type="button" class="button light disabled expanded"><i class="fas fa-user-clock"></i>Pending...</button>
                        </div>
                    </div>
                    <div class="outgoing-match-container">
                        <div class="outgoing-match-image">
                            <img src="/img/profile-img.jpg">
                        </div>
                        <div class="outgoing-match-info">
                            <h4>Artist Name</h4>
                            <h6>Date Invite Sent</h6>
                        </div>
                        <div class="outgoing-match-instruments">
                            <h4>Instruments</h4>
                            <ul>
                                <li>
                                    Instrument 1!
                                </li>
                                <li>
                                    Instrument 2!
                                </li>
                            </ul>
                        </div>
                        <div class="outgoing-match-pending">
                            <button type="button" class="button light disabled expanded"><i class="fas fa-user-clock"></i>Pending...</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>